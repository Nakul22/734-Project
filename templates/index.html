{%extends 'base.html'%}

{% block body%}
    
    <h1 class="ui header" align="center" style="color: rosybrown;">Covid-19 Propagation Simulation</h1>
    <div class="ui divider"></div>
    <div class="ui two column padded grid">
        <div class="row">
            <div class="four wide column">
                <div id='controls'>
                    <form class="ui form" id='usercontrols' action='/getdataset', method="POST">
                        <h4 class="ui dividing header">Testing Features</h4>
                        <div class="two fields">
                            <div class="field">
                                <label>Time taken for results</label>
                                <select class="ui fluid dropdown" name='time for result'> 
                                  <option value="0">Immediately</option>
                                  <option value="1">24hrs</option>
                                  <option value="3">72hrs</option>
                                  <option value="7">1 week</option>
                                </select>
                            </div>
                            <div class="field">
                                <label>% of False Negative Results</label>
                                <select class="ui fluid dropdown" name='false_negatives'>
                                  <option value="1">1%</option>
                                  <option value="5">5%</option>
                                  <option value="10">10%</option>
                                </select>
                            </div>
                        </div>

                        <h4 class="ui dividing header">Personal Measures</h4>
                        <div class="two fields">
                            <div class="field">
                                <label>Days Between Tests</label>
                                    <select class="ui fluid search dropdown" name="days_between_tests">
                                        <option value="1">24 hours</option>
                                        <option value="7">1 week</option>
                                        <option value="14">2 weeks</option>
                                    </select>
                            </div>
                            <div class="field">
                                <label>Quarantine enforced</label>
                                <select class="ui fluid search dropdown" name="quarantine">
                                    <option value="1">Yes</option>
                                    <option value="0">No</option>
                                </select>
                            </div>
                        </div>
                        <div class="field">
                            <label>Prob. of Masks</label>
                            <div class='ui input' id='mask_range' style="text-align: center;">
                                <div class="inline fields">
                                    <div class="field">
                                      <div class="ui radio checkbox">
                                        <input type="radio" name="prob_mask" checked="" value="25" tabindex="0" class="hidden" onclick=mask_changed>
                                        <label>25%</label>
                                      </div>
                                    </div>
                                    <div class="field">
                                      <div class="ui radio checkbox">
                                        <input type="radio" name="prob_mask" tabindex="1" value="50" class="hidden" onclick=mask_changed>
                                        <label>50%</label>
                                      </div>
                                    </div>
                                    <div class="field">
                                      <div class="ui radio checkbox">
                                        <input type="radio" name="prob_mask" tabindex="2" value="75" class="hidden" onclick=mask_changed>
                                        <label>75%</label>
                                      </div>
                                    </div>
                                    <div class="field">
                                      <div class="ui radio checkbox">
                                        <input type="radio" name="prob_mask" tabindex="3" value="100" class="hidden" onclick=mask_changed>
                                        <label>100%</label>
                                      </div>
                                    </div>
                                </div>
                            </div>    
                        </div>
                        <div class="ui button" tabindex="0" id='submitbutton'>Run Simulation</div>
                        <input type="submit" id='submit' hidden>
                    </form>
                </div>
            </div>
            <div class="twelve wide column">
                <!-- visualization controls row -->
                <div class="row">
                    <div class="ui four column grid" >
                        <!-- column for slowing down the visualization -->
                        <div class="column">
                          <div class="ui segment">
                            <label style="font-size: 20px; font-weight: bold;">Speed</label>
                            <select class="ui fluid dropdown" id='speed'> 
                                <option value="slow">Slow</option>
                                <option value="normal" selected>Normal</option>
                                <option value="fast">Fast</option>
                            </select>
                          </div>
                        </div>

                        <!-- column for playing/pausing the visualization -->
                        <div class="column">
                          <div class="ui segment">
                            <label style="font-size: 20px; font-weight: bold;">Play/Pause</label><br/>
                            <button class="ui icon button" id='play_pause' type="button" value="pause" disabled>
                                <i class="pause icon" id='playicon'></i>
                            </button>
                          </div>
                        </div>

                        <!-- column for displaying dates -->
                        <div class="column">
                          <div class="ui segment">
                            <label id='dates_range' style="font-size: 20px; font-weight: bold;">Dates</label>
                            <input type="range" id="day_buttons" min=1, max=500 value="1" style="width: 300px;">
                             </input>
                          </div>
                        </div>

                        <!-- column for showing count of cases -->
                        <div class="column">
                            <div class="ui segment">
                                <label style="font-size: 20px; font-weight: bold;">Total Cases</label>
                                <p id='infection_counter' style="font-size: 20px; font-weight: bold;">0</p>   
                            </div>
                        </div>
                      </div>
                </div>

                <!-- visualization -->
                <div class="row">
                  <div class="ui two column grid">
                    <div class="thirteen wide column">
                        <!-- loading bar -->
                        <div class="ui segment" id='loader' style="height: 500px;" hidden>
                          <div class="ui active dimmer" style="height: 500px;">
                              <div class="ui huge text loader" style="height: 500px;">Loading</div>
                          </div>
                          <p></p>
                        </div>
                        <div class="ui segment" id='vizspace' style="height: 500px;">
                        <div class="ui active dimmer" style="height: 500px;">
                            <div style="height: 500px; background-color:  #E5E1E1;">
                              <h1> Select controls to start simulation</h1>
                            </div>
                        </div>
                        <p></p>
                        </div>

                        <!-- simulation div -->
                        <div id='simulation' style="display: none; background-color: #E5E1E1;"></div>
                    </div>
                  <!-- legend -->
                    <div class=" two wide column">
                      <div class="ui vertical menu">
                        
                          <div style="background-color: #CBBE4B; margin-bottom: 5px;">
                            <div class="link item" style="color:white">
                              Tested: Awaiting Result
                            </div>
                          </div>

                          <div style="background-color:#F32626; margin-bottom: 5px; margin-top: 5px">
                            <div class="link item" style="color:white">
                              Tested: True Positive
                            </div>
                          </div>
                          
                          <div style="background-color: #376C87; margin-bottom: 5px; margin-top: 5px">
                            <div class="link item" style="color:white">
                              Tested: False Positive
                            </div>
                          </div>

                          <div style="background-color: #F0610F; margin-bottom: 5px; margin-top: 5px">
                            <div class="link item" style="color:white">
                              Tested: False Negative
                            </div>
                          </div>

                          <div style="background-color: #38D1C2; margin-bottom: 5px; margin-top: 5px">
                            <div class="link item" style="color:white">
                              Tested: Negative
                            </div>
                          </div>

                          <div style="background-color: #A60823; margin-bottom: 5px; margin-top: 5px">
                            <div class="link item" style="color:white">
                              Infected: Not Tested
                            </div>
                          </div>

                          <div style="background-color: gray; margin-bottom: 5px; margin-top: 5px">
                            <div class="link item" style="color:white">
                              Safe
                            </div>
                          </div>
                          
                            <div class="link item" style="color:gray;">
                              <hr style="width: 40px; height:2px; border-width:0; background-color: #999;"/> Non Masked Interaction
                            </div>

                            <div class="link item" style="color:gray;">
                              <hr style="width: 40px; border-top:1px dashed #218295;"/> Masked Interaction
                            </div>
                          
                      </div>
                    </div>
                  </div>
                    
                </div>
                
            </div>  
        </div>
    </div>

    <!-- grid for smaller charts -->
    <div class="ui three column grid">
        <div class="row">
          <div class="column" id="heatmap">
            <h2 class="ui header" align="center" style="color: rosybrown;">Infection rates Heatmap</h2>
          </div>
          <div class="column">
            <h2 class="ui header" align="center" style="color: rosybrown;">Daily Cases</h2>
            <!-- Sungbok Todo -->
          </div>
          <div class="column">
            <h2 class="ui header" align="center" style="color: rosybrown;">Total Cases</h2>
            <!-- Sungbok Todo -->
          </div>
          <!-- <div class="column">
            <h2 class="ui header" align="center" style="color: rosybrown;">Spread Probability</h2>
          </div> -->
        </div>
        <div class="fullscreen modal" hidden>
            <div id="open_image">  
            </div>
        </div>
    </div>
{%endblock%}